<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>JiBaJiBa v4.3 优化版（更新）</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
        /* CSS 变量定义 - 主题色彩 */
        :root {
            --bg-dark: #0f0f0f;      /* 深色背景 */
            --bg-card: #1b1b1b;      /* 卡片背景 */
            --bg-hover: #2b2b2b;     /* 悬停背景 */
            --text-main: #f1f1f1;    /* 主要文字颜色 */
            --text-sub: #aaaaaa;     /* 次要文字颜色 */
            --accent: #00a1d6;       /* 强调色/主题色 */
        }
        
        /* 全局重置和基础样式 */
        * { box-sizing: border-box; }
        body {
            margin: 0;
            padding: 15px;
            background: var(--bg-dark);
            color: var(--text-main);
            font-family: "Segoe UI", sans-serif;
        }
        
        /* 顶部容器布局 */
        .container {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        /* 标题区域样式 */
        .title_ {
            display: flex;
            align-items: center;
            font-size: 26px;
            font-weight: bold;
        }
        .title_ img {
            height: 38px;
            margin-right: 10px;
            border-radius: 8px;
            transition: transform 0.2s ease;
        }
        .title_ img:hover {
            transform: scale(1.15);
            cursor: pointer;
        }
        
        /* 协议选择按钮区域 */
        .protocols {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }
        .protocol-btn {
            padding: 6px 12px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            background: var(--bg-card);
            color: var(--text-main);
            transition: 0.18s;
        }
        .protocol-btn.active {
            background: var(--accent);
            color: #fff;
        }
        .protocol-btn:hover {
            background: var(--bg-hover);
        }
        
        /* 搜索输入区域 */
        .search_ {
            display: flex;
            flex: 1;
            min-width: 200px;
        }
        .text_enter {
            flex: 1;
            background: var(--bg-card);
            border: 1px solid var(--bg-hover);
            border-radius: 6px;
            padding: 8px;
            color: var(--text-main);
        }
        .button_s {
            margin-left: 10px;
            padding: 8px 14px;
            border-radius: 6px;
            border: none;
            background: var(--accent);
            color: #fff;
            cursor: pointer;
            transition: 0.18s;
        }
        .button_s:hover {
            background: #33b6e8;
        }
        
        /* 主内容区域布局 */
        .main_ {
            display: flex;
            gap: 18px;
            margin-top: 18px;
            height: calc(100vh - 80px);
            flex-wrap: wrap;
        }
        
        /* 视频容器样式 */
        .videoContainer {
            flex: 3;
            min-width: 300px;
            background: var(--bg-card);
            border-radius: 10px;
            padding: 12px;
            box-shadow: 0 0 12px rgba(0,0,0,0.35);
            display: flex;
            flex-direction: column;
        }
        video {
            width: 100%;
            flex: 1;
            border-radius: 10px;
            background: #000;
        }
        .status {
            margin-top: 6px;
            font-size: 13px;
            color: var(--text-sub);
        }
        .controls {
            margin-top: 10px;
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }
        .button_l, .button_r {
            height: 30px;
            padding: 0 12px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-size: 12px;
            transition: transform 0.12s, box-shadow 0.12s, background 0.12s;
        }
        .button_l {
            background: var(--bg-hover);
            color: var(--text-main);
        }
        .button_r {
            background: var(--accent);
            color: white;
        }
        .button_l:hover, .button_r:hover {
            background: #33b6e8;
            transform: translateY(-1px);
            box-shadow: 0 2px 6px rgba(0,0,0,0.28);
        }
        
        /* 侧边频道列表区域 */
        .buttons {
            flex: 1;
            min-width: 220px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            max-height: 100%;
        }
        .section-title {
            font-size: 14px;
            color: var(--text-main);
            margin: 10px 0 4px 0;
            font-weight: bold;
            padding-left: 6px;
        }
        
        /* 频道按钮样式 */
        .button_play {
            display: flex;
            align-items: center;
            background: var(--bg-card);
            border: none;
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 6px;
            color: var(--text-main);
            cursor: pointer;
            transition: background 0.2s, transform 0.15s, box-shadow 0.15s;
            height: 60px;
            width: 100%;
            position: relative;
            overflow: hidden;
        }
        .button_play.manual {
            height: 45px;
        }
        .button_play:hover {
            background: var(--bg-hover);
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(0,0,0,0.45);
        }
        .button_play:active {
            transform: translateY(0);
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        }
        
        /* 频道头像样式 */
        .head_img {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
        }
        
        /* 频道文字信息 */
        .channel_text {
            font-size: 14px;
        }
        .url_text {
            font-size: 11px;
            color: var(--text-sub);
            word-break: break-all;
            margin-left: 58px;
            margin-top: 4px;
        }
        
        /* 删除按钮样式 */
        .delete_btn {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-main);
            font-weight: bold;
            cursor: pointer;
            font-size: 18px;
            transition: color 0.12s, transform 0.12s;
        }
        .delete_btn:hover {
            color: #ff4d4d;
            transform: scale(1.2);
        }
        
        /* 全屏模式样式 */
        .fullscreen-mode {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: black;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .fullscreen-mode video {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        .fullscreen-controls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            padding: 10px;
            border-radius: 5px;
            z-index: 10000;
            opacity: 1;
            transition: opacity 0.25s;
        }
        .fullscreen-controls.hidden {
            opacity: 0;
            pointer-events: none;
        }
        .fullscreen-controls button {
            margin: 0 5px;
            color: white;
            background: var(--bg-hover);
            border: none;
            padding: 8px 15px;
            border-radius: 3px;
            cursor: pointer;
            transition: 0.12s;
        }
        .fullscreen-controls button:hover {
            background: var(--bg-card);
        }
        
        /* 按下状态反馈样式 */
        .pressed {
            transform: translateY(0) scale(0.995);
            box-shadow: 0 1px 4px rgba(0,0,0,0.25);
        }
        
        /* 响应式设计 - 小屏幕适配 */
        @media (max-width: 800px) {
            .main_ {
                flex-direction: column;
            }
            .videoContainer {
                height: 300px;
            }
            /* 隐藏网页全屏按钮（手机端） */
            #fullscreenBtn {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- 顶部控制区域 -->
    <div class="container">
        <!-- 应用标题和Logo -->
        <div class="title_">
            <img src="icon.png" alt="logo">JiBaJiBa
        </div>
        
        <!-- 协议选择区域 -->
        <div class="protocols" role="tablist" aria-label="协议选择">
            <button class="protocol-btn active" data-proto="whep" aria-pressed="true">WHEP</button>
            <button class="protocol-btn" data-proto="whip">WHIP</button>
            <button class="protocol-btn" data-proto="rtmp">RTMP</button>
        </div>
        
        <!-- 搜索和连接区域 -->
        <div class="search_">
            <input id="roomInput" type="text" placeholder="输入房间号" class="text_enter" aria-label="房间号">
            <button class="button_s" id="connectBtn">连接</button>
        </div>
    </div>
    
    <!-- 主内容区域 -->
    <div class="main_">
        <!-- 视频播放区域 -->
        <div class="videoContainer" aria-live="polite">
            <video id="remoteVideo" autoplay playsinline muted controls></video>
            <div id="status" class="status">未连接</div>
            <div class="controls" role="toolbar">
                <button class="button_l" id="refreshBtn">刷新</button>
                <button class="button_l" id="disconnectBtn">断开</button>
                <button class="button_l" id="fullscreenBtn">网页全屏</button>
            </div>
        </div>
        
        <!-- 侧边频道列表 -->
        <div class="buttons" id="channelList">
            <div class="section-title">预设频道</div>
            <div id="presetContainer" aria-label="预设频道"></div>
            
            <div class="section-title">历史记录</div>
            <div id="historyContainer" aria-label="历史记录"></div>
        </div>
    </div>
    
    <!-- 引入 WebRTC 适配器 -->
    <script src="adapter.js"></script>
    
    <script>
        /**
         * JiBaJiBaPlayer - 直播播放器类
         * 特性：
         *  - 预设频道、历史记录（可删除）
         *  - 协议选择（WHEP/WHIP/RTMP）
         *  - Enter 键连接
         *  - 动效（CSS）与按下反馈（JS）
         *  - 手机端隐藏全屏按钮（通过 CSS 媒体查询）
         */
        class JiBaJiBaPlayer {
            constructor() {
                // WebRTC 相关变量
                this.pc = null;                    // RTCPeerConnection 实例
                this.currentUrl = null;            // 当前播放的流地址
                this.statsInterval = null;         // 统计信息定时器
                
                // 全屏相关变量
                this.isFullscreen = false;         // 全屏状态标志
                this.fullscreenTimeout = null;     // 全屏控制栏隐藏定时器
                
                // 当前选择的协议
                this.currentProto = 'whep';
                
                // DOM 元素引用
                this.video = document.getElementById('remoteVideo');           // 视频元素
                this.statusEl = document.getElementById('status');             // 状态显示元素
                this.fullscreenBtn = document.getElementById('fullscreenBtn'); // 全屏按钮
                this.roomInput = document.getElementById('roomInput');         // 房间号输入框
                this.presetContainer = document.getElementById('presetContainer'); // 预设频道容器
                this.historyContainer = document.getElementById('historyContainer'); // 历史记录容器
                
                // 预设频道数据
                this.presetChannels = [
                    { name: '[直播] JOYG', img: 'joyg.jpg', url: 'http://10.126.126.10:1985/rtc/v1/whep/?app=live&stream=JOYG' },
                    { name: '[直播] 超级老鼠', img: 'cmhh.jpg', url: 'http://10.126.126.10:1985/rtc/v1/whep/?app=live&stream=CMHH' },
                    { name: '[直播] Pure1ove', img: 'pl.jpg', url: 'http://10.126.126.10:1985/rtc/v1/whep/?app=live&stream=PL' }
                ];
                
                // 初始化 UI 绑定和预设频道
                this._bindUI();
                this._loadPresetChannels();
                this.updateStatus('就绪 - 点击频道或输入房间号开始播放');
            }
            
            /**
             * 绑定 UI 事件监听器
             */
            _bindUI() {
                // 协议选择按钮事件
                document.querySelectorAll('.protocol-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        // 移除所有按钮的激活状态
                        document.querySelectorAll('.protocol-btn').forEach(b => b.classList.remove('active'));
                        document.querySelectorAll('.protocol-btn').forEach(b => b.setAttribute('aria-pressed', 'false'));
                        
                        // 设置当前按钮为激活状态
                        btn.classList.add('active');
                        btn.setAttribute('aria-pressed', 'true');
                        this.currentProto = btn.dataset.proto;
                    });
                });
                
                // 连接按钮点击事件
                document.getElementById('connectBtn').addEventListener('click', () => this.connectRoom());
                
                // 刷新按钮点击事件
                document.getElementById('refreshBtn').addEventListener('click', () => this.refresh());
                
                // 断开连接按钮点击事件
                document.getElementById('disconnectBtn').addEventListener('click', () => this.disconnect());
                
                // 全屏按钮点击事件（如果存在）
                if (this.fullscreenBtn) {
                    this.fullscreenBtn.addEventListener('click', () => this.toggleFullscreen());
                }
                
                // 输入框回车键连接事件
                this.roomInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        this.connectRoom();
                    }
                });
                
                // 全局快捷键
                document.addEventListener('keydown', (e) => {
                    // F 键进入全屏（非全屏状态且有视频流时）
                    if ((e.key === 'f' || e.key === 'F') && !this.isFullscreen && this.video.srcObject) {
                        this.toggleFullscreen();
                    }
                    // ESC 键退出全屏
                    if (e.key === 'Escape' && this.isFullscreen) {
                        this.toggleFullscreen();
                    }
                });
            }
            
            /**
             * 加载预设频道到界面
             */
            _loadPresetChannels() {
                this.presetContainer.innerHTML = '';
                this.presetChannels.forEach(ch => {
                    const btn = this._createChannelButton(ch.name, ch.img, ch.url, false);
                    this.presetContainer.appendChild(btn);
                });
            }
            
            /**
             * 创建频道按钮
             * @param {string} name - 频道名称
             * @param {string} img - 频道头像URL
             * @param {string} url - 流媒体URL
             * @param {boolean} manual - 是否为手动添加的频道（历史记录）
             * @returns {HTMLElement} 频道按钮元素
             */
            _createChannelButton(name, img, url, manual = false) {
                const btn = document.createElement('button');
                btn.className = 'button_play' + (manual ? ' manual' : '');
                btn.type = 'button';
                
                // 点击连接事件
                btn.addEventListener('click', () => this.connectStream(url));
                
                // 按下反馈效果
                btn.addEventListener('mousedown', () => btn.classList.add('pressed'));
                document.addEventListener('mouseup', () => btn.classList.remove('pressed'));
                btn.addEventListener('mouseleave', () => btn.classList.remove('pressed'));
                
                // 添加频道头像（如果有）
                if (img) {
                    const imgEl = document.createElement('img');
                    imgEl.className = 'head_img';
                    imgEl.src = img;
                    imgEl.alt = '';
                    btn.appendChild(imgEl);
                }
                
                // 添加频道名称
                const txt = document.createElement('div');
                txt.className = 'channel_text';
                txt.innerText = name;
                btn.appendChild(txt);
                
                // 如果是手动添加的频道（历史记录），添加删除按钮和URL显示
                if (manual) {
                    // 创建URL显示元素
                    const urlDiv = document.createElement('div');
                    urlDiv.className = 'url_text';
                    urlDiv.innerText = url;
                    
                    // 创建删除按钮
                    const delBtn = document.createElement('button');
                    delBtn.className = 'delete_btn';
                    delBtn.type = 'button';
                    delBtn.title = '删除记录';
                    delBtn.innerText = '×';
                    delBtn.addEventListener('click', (e) => {
                        e.stopPropagation(); // 阻止事件冒泡，避免触发频道连接
                        
                        // 移除按钮和URL显示元素
                        if (btn.parentElement) {
                            btn.parentElement.removeChild(btn);
                        }
                        if (urlDiv.parentElement) {
                            urlDiv.parentElement.removeChild(urlDiv);
                        }
                    });
                    
                    btn.appendChild(delBtn);
                    
                    // 添加到历史记录容器
                    this.historyContainer.appendChild(btn);
                    this.historyContainer.appendChild(urlDiv);
                }
                
                return btn;
            }
            
            /**
             * 根据房间号和协议生成URL
             * @param {string} room - 房间号
             * @returns {string|null} 生成的URL或null（无效时）
             */
            generateUrl(room) {
                if (!room) {
                    return null;
                }
                
                switch (this.currentProto) {
                    case 'whep':
                        return `http://10.126.126.10:1985/rtc/v1/whep/?app=live&stream=${room}`;
                    case 'whip':
                        return `http://10.126.126.10:1985/rtc/v1/whip/?app=live&stream=${room}`;
                    case 'rtmp':
                        return `rtmp://10.126.126.10/live/${room}`;
                    default:
                        return null;
                }
            }
            
            /**
             * 连接房间（根据输入的房间号）
             */
            connectRoom() {
                const room = this.roomInput.value.trim();
                if (!room) {
                    return;
                }
                
                const url = this.generateUrl(room);
                if (!url) {
                    return;
                }
                
                this.connectStream(url);
                this.addManualChannel(room, url);
            }
            
            /**
             * 添加手动频道到历史记录
             * @param {string} name - 频道名称
             * @param {string} url - 流媒体URL
             */
            addManualChannel(name, url) {
                this._createChannelButton(name, null, url, true);
            }
            
            /**
             * 刷新当前连接
             */
            refresh() {
                if (this.currentUrl) {
                    this.connectStream(this.currentUrl);
                }
            }
            
            /**
             * 断开当前连接
             */
            disconnect() {
                // 关闭 RTCPeerConnection
                if (this.pc) {
                    try {
                        this.pc.close();
                    } catch (e) {}
                    this.pc = null;
                }
                
                // 清除统计定时器
                if (this.statsInterval) {
                    clearInterval(this.statsInterval);
                    this.statsInterval = null;
                }
                
                // 清除视频源
                try {
                    this.video.srcObject = null;
                } catch (e) {}
                
                // 更新状态
                this.updateStatus('已断开连接');
                window._lastBytes = 0;
                
                // 如果处于全屏状态，退出全屏
                if (this.isFullscreen) {
                    this.toggleFullscreen();
                }
            }
            
            /**
             * 连接流媒体
             * @param {string} url - 流媒体URL
             */
            async connectStream(url) {
                // 断开现有连接
                this.disconnect();
                this.currentUrl = url;
                this.updateStatus('正在连接...');
                
                try {
                    // 创建 RTCPeerConnection
                    this.pc = new RTCPeerConnection({
                        iceServers: [{ urls: 'stun:stun.l.google.com:19302' }]
                    });
                    
                    // 添加音视频接收器
                    this.pc.addTransceiver('video', { direction: 'recvonly' });
                    this.pc.addTransceiver('audio', { direction: 'recvonly' });
                    
                    // 轨道接收事件处理
                    this.pc.ontrack = (e) => {
                        try {
                            this.video.srcObject = e.streams[0];
                        } catch (err) {}
                        this.updateStatus('连接成功 · 正在接收视频');
                    };
                    
                    // ICE 连接状态变化事件
                    this.pc.oniceconnectionstatechange = () => {
                        if (this.pc) {
                            const st = this.pc.iceConnectionState;
                            if (st === 'failed' || st === 'disconnected') {
                                this.updateStatus(`ICE: ${st}`);
                            }
                        }
                    };
                    
                    // 创建并设置本地 offer
                    const offer = await this.pc.createOffer();
                    await this.pc.setLocalDescription(offer);
                    
                    // 发送 offer 到服务器
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/sdp' },
                        body: offer.sdp
                    });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`);
                    }
                    
                    // 接收并设置远程 answer
                    const answer = await response.text();
                    await this.pc.setRemoteDescription({ type: 'answer', sdp: answer });
                    
                    // 开始统计信息收集
                    this._startStats();
                    
                } catch (e) {
                    console.error('连接失败', e);
                    this.updateStatus(`连接失败: ${e.message}`);
                    this.disconnect();
                }
            }
            
            /**
             * 开始收集连接统计信息
             */
            _startStats() {
                if (this.statsInterval) {
                    clearInterval(this.statsInterval);
                }
                
                this.statsInterval = setInterval(async () => {
                    if (!this.pc || this.pc.connectionState !== 'connected') {
                        return;
                    }
                    
                    try {
                        const stats = await this.pc.getStats();
                        let fps = 0, bitrate = 0, rtt = 0, loss = 0;
                        
                        stats.forEach(r => {
                            // 视频流统计
                            if (r.type === 'inbound-rtp' && r.kind === 'video') {
                                // 帧率
                                if (r.framesPerSecond) {
                                    fps = r.framesPerSecond;
                                }
                                
                                // 码率计算
                                if (r.bytesReceived && r.timestamp) {
                                    if (!window._lastBytes) {
                                        window._lastBytes = r.bytesReceived;
                                    }
                                    const dt = (r.timestamp - (window._lastTimestamp || r.timestamp)) / 1000;
                                    if (dt > 0) {
                                        bitrate = ((r.bytesReceived - window._lastBytes) * 8 / dt / 1024 / 1024).toFixed(2);
                                    }
                                    window._lastBytes = r.bytesReceived;
                                    window._lastTimestamp = r.timestamp;
                                }
                                
                                // 丢包率计算
                                if (r.packetsLost !== undefined && r.packetsReceived !== undefined) {
                                    const total = r.packetsLost + r.packetsReceived;
                                    loss = total > 0 ? (r.packetsLost / total * 100).toFixed(2) : 0;
                                }
                            }
                            
                            // 往返时间统计
                            if (r.type === 'candidate-pair' && r.currentRoundTripTime) {
                                rtt = (r.currentRoundTripTime * 1000).toFixed(0);
                            }
                        });
                        
                        this.updateStatus(`延迟: ${rtt}ms | 码率: ${bitrate}Mbps | FPS: ${fps} | 丢包率: ${loss}%`);
                    } catch (e) {
                        // 静默处理统计获取失败
                    }
                }, 1000);
            }
            
            /**
             * 切换全屏模式
             */
            toggleFullscreen() {
                // 进入全屏模式
                if (!this.isFullscreen) {
                    // 创建全屏覆盖层
                    const overlay = document.createElement('div');
                    overlay.className = 'fullscreen-mode';
                    overlay.id = 'fullscreenContainer';
                    
                    // 创建控制栏
                    const controls = document.createElement('div');
                    controls.className = 'fullscreen-controls';
                    controls.innerHTML = `<button id="fsDisconnectBtn" type="button">断开</button><button id="fsExitBtn" type="button">退出全屏</button>`;
                    
                    // 克隆视频元素（避免移动原始节点，提高跨浏览器兼容性）
                    const videoClone = this.video.cloneNode(true);
                    videoClone.controls = true;
                    
                    // 复制视频源
                    try {
                        if (this.video.srcObject) {
                            videoClone.srcObject = this.video.srcObject;
                        }
                    } catch (e) {}
                    
                    // 添加元素到覆盖层
                    overlay.appendChild(videoClone);
                    overlay.appendChild(controls);
                    document.body.appendChild(overlay);
                    
                    // 绑定全屏控制按钮事件
                    document.getElementById('fsDisconnectBtn').addEventListener('click', () => this.disconnect());
                    document.getElementById('fsExitBtn').addEventListener('click', () => this.toggleFullscreen());
                    
                    // 隐藏原始视频（保持布局）
                    this.video.style.display = 'none';
                    
                    // 更新按钮文本和状态
                    if (this.fullscreenBtn) {
                        this.fullscreenBtn.textContent = '退出全屏';
                    }
                    this.isFullscreen = true;
                    
                    // 设置控制栏自动隐藏
                    this.fullscreenTimeout = setTimeout(() => controls.classList.add('hidden'), 1000);
                    
                    // 鼠标移动显示控制栏
                    overlay.addEventListener('mousemove', () => {
                        controls.classList.remove('hidden');
                        clearTimeout(this.fullscreenTimeout);
                        this.fullscreenTimeout = setTimeout(() => controls.classList.add('hidden'), 1200);
                    });
                    
                    // 鼠标离开控制栏区域
                    controls.addEventListener('mouseleave', () => {
                        clearTimeout(this.fullscreenTimeout);
                        this.fullscreenTimeout = setTimeout(() => controls.classList.add('hidden'), 1200);
                    });
                    
                } else { // 退出全屏模式
                    const overlay = document.getElementById('fullscreenContainer');
                    if (overlay) {
                        document.body.removeChild(overlay);
                    }
                    
                    if (this.fullscreenTimeout) {
                        clearTimeout(this.fullscreenTimeout);
                        this.fullscreenTimeout = null;
                    }
                    
                    // 恢复原始视频显示
                    this.video.style.display = 'block';
                    
                    // 更新按钮文本和状态
                    if (this.fullscreenBtn) {
                        this.fullscreenBtn.textContent = '网页全屏';
                    }
                    this.isFullscreen = false;
                }
            }
            
            /**
             * 更新状态显示
             * @param {string} text - 状态文本
             */
            updateStatus(text) {
                if (this.statusEl) {
                    this.statusEl.innerText = text;
                }
            }
        }
        
        // 创建全局播放器实例
        window.player = new JiBaJiBaPlayer();
    </script>
</body>
</html>
