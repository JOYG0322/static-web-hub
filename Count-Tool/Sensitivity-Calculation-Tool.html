<!doctype html>
<html lang="zh-CN">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>Sensitivity-Calculation-Tool</title>
	<style>
		:root{
			--bg:#0f0f12;
			--panel:#141418;
			--muted:#9aa0a6;
			--accent:#ff3b3b; 
			--glass: rgba(255,255,255,0.03);
		}
		html,body{height:100%;margin:0;font-family:Inter,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(180deg,var(--bg),#050506);color:#e6e6e6}
		.container{
			min-height:100vh;
			display:flex;
			align-items:center;
			justify-content:center;
			padding:32px;
			flex-direction:column;
			gap:24px;
		}
		/* 恢复卡片为固定视觉宽度，不随 sidebar 被压缩 */
		/* 简洁统一的卡片设计（更少装饰、更大间距） */
		.card{
			flex: 0 0 720px;
			width:720px;
			max-width:720px;
			background:rgba(255,255,255,0.02);
			border:1px solid rgba(255,255,255,0.03);
			padding:24px;
			border-radius:10px;
			box-shadow:0 4px 12px rgba(0,0,0,0.45); /* 更轻的阴影 */
			box-sizing:border-box;
		}
 
 		/* 主区：card + sidebar 并排，保持相同高度 */
 		.main{
			display:flex;
			gap:18px;
			align-items:stretch; /* 使 card 与 sidebar 高度一致 */
			justify-content:center; /* 居中整体区域 */
			width:100%;
			/* 限制主区宽度为 card + gap + sidebar，避免 card 被压缩 */
			max-width: calc(720px + 18px + 300px);
			margin:0 auto;
 		}
		/* 右侧提示栏 */
		.sidebar{
			width:300px;
			background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
			border:1px solid rgba(255,255,255,0.03);
			border-radius:12px;
			padding:14px;
			box-shadow:0 8px 30px rgba(0,0,0,0.55);
			display:flex;
			flex-direction:column;
			gap:12px;
			overflow:hidden;
		}
		.tip-select{
			background:var(--glass);
			color: #e6e6e6; /* 修改为浅灰色，确保在深色背景下清晰可见 */
			border:1px solid rgba(255,255,255,0.04);
			padding:8px 10px;
			border-radius:8px;
			font-size:14px;
		}
		.tip-select option {
			background: #141418; /* 深色背景，确保与整体风格一致 */
			color: #e6e6e6; /* 浅灰色文字，清晰可见 */
		}
		.tip-content{
			background:transparent;
			border-radius:8px;
			padding:10px;
			border:1px dashed rgba(255,255,255,0.04);
			color:var(--muted);
			font-size:13px;
			overflow:auto; /* 可滚动，支持向下翻页 */
			flex:1; /* 占满剩余高度，保证与 card 高度一致 */
			white-space:pre-wrap; /* 保持换行 */
			line-height:1.5;
		}
		/* 美化滚动条（深色主题）*/
		.tip-content::-webkit-scrollbar{width:10px}
		.tip-content::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.04);border-radius:6px}
		.tip-content::-webkit-scrollbar-track{background:transparent}
		@media (max-width:520px){
			.form{grid-template-columns:1fr}
			.controls{flex-direction:column;align-items:stretch}
		}
		/* 小屏下堆叠 sidebar 到下方 */
		@media (max-width:920px){
			.main{flex-direction:column;max-width:720px;padding:0 12px}
			.sidebar{width:100%}
		}
		/* 输入框文字颜色调整为白色 */
		.float-input {
			color: #fff; /* 更清晰的白色文字 */
		}

		/* 计算按钮样式统一 */
		button {
			background: var(--accent); /* 使用统一的红色 */
			color: #fff; /* 白色文字 */
			font-weight: 600; /* 加粗字体 */
			border: none; /* 无边框 */
			border-radius: 8px; /* 圆角 */
			box-shadow: 0 6px 20px rgba(255, 59, 59, 0.12); /* 轻微阴影 */
			cursor: pointer; /* 鼠标悬停时显示手型 */
			transition: background-color 0.2s, box-shadow 0.2s; /* 动效 */
		}
		button:hover {
			background: #e60000; /* 悬停时更深的红色 */
			box-shadow: 0 8px 24px rgba(255, 59, 59, 0.18); /* 加强阴影 */
		}
		button:disabled {
			opacity: 0.6; /* 禁用时透明度降低 */
			cursor: not-allowed; /* 禁用时鼠标显示不可用 */
			box-shadow: none; /* 无阴影 */
		}
	</style>
</head>
<body>
	<div class="container">
		<!-- 第一部分：包含主卡片和右侧提示栏 -->
		<div class="main">
			<div class="card" role="region" aria-label="浮点输入计算器">
				<!-- 简洁紧凑的 header -->
				<div class="header" style="display:flex;align-items:center;gap:12px;margin-bottom:12px;">
					<div class="logo" style="width:44px;height:44px;border-radius:8px;background:var(--accent);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:14px;">F</div>
					<div style="min-width:0">
						<h1 style="font-size:18px;margin:0">fov 灵敏度计算</h1>
						<p class="lead" style="margin:4px 0 0;font-size:13px;color:var(--muted)">输入参数以计算目标 cm/360</p>
					</div>
				</div>

				<form id="calcForm" onsubmit="return false;">
					<!-- 单列全宽布局，间距更大更清晰 -->
					<div class="form" style="display:flex;flex-direction:column;gap:14px;">
						<div class="field" style="display:flex;flex-direction:column;gap:6px">
							<label for="v1" style="font-size:13px;color:var(--muted)">源游戏 vfov</label>
							<input id="v1" class="float-input" type="number" step="any" min="0.0000001" inputmode="decimal" required placeholder="源VFOV" aria-label="源游戏 vfov" style="width:100%;font-size:16px;padding:12px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04)"/>
						</div>
						<div class="field" style="display:flex;flex-direction:column;gap:6px">
							<label for="v2" style="font-size:13px;color:var(--muted)">目标游戏 vfov</label>
							<input id="v2" class="float-input" type="number" step="any" min="0.0000001" inputmode="decimal" required placeholder="目标VFOV" aria-label="目标游戏 vfov" style="width:100%;font-size:16px;padding:12px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04)"/>
						</div>
						<div class="field" style="display:flex;flex-direction:column;gap:6px">
							<label for="v3" style="font-size:13px;color:var(--muted)">源游戏 cm / 360</label>
							<input id="v3" class="float-input" type="number" step="any" min="0.0000001" inputmode="decimal" required placeholder="源cm/360°" aria-label="源游戏 cm per 360" style="width:100%;font-size:16px;padding:12px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.04)"/>
						</div>
						<div class="controls" style="display:flex;gap:12px;align-items:center;margin-top:6px">
							<button id="calcBtn" type="button" disabled style="flex:0 0 160px;padding:12px 18px;font-size:16px">计算</button>
							<div id="output" class="output" aria-live="polite" role="status" style="flex:1;padding:12px 14px;border-radius:8px;border:1px dashed rgba(255,255,255,0.04);font-size:20px;font-weight:600;color:var(--muted)">目标cm/360°</div>
						</div>
						<p class="note" style="margin-top:8px;color:var(--muted);font-size:13px">提示：仅输入正的浮点数</p><a href="https://www.mouse-sensitivity.com" target="_blank" rel="noopener noreferrer">更多计算</a>
						<div class="footer" style="text-align:right;color:var(--muted);font-size:12px">GitHub Copilot 界面 | Chaoji_Mouse 算法</div>
					</div>
				</form>
			</div>
			<!-- 右侧提示栏 -->
			<aside class="sidebar" aria-label="提示栏">
				<label for="tipSelect" style="font-size:13px;color:var(--muted)">选择提示</label>
				<select id="tipSelect" class="tip-select" aria-label="选择提示">
					<option value="">关于本网站</option>
				</select>
				<div id="tipContent" class="tip-content" role="region" aria-live="polite">本网站为一个用于计算不同视场下灵敏度的工具，支持不同游戏的计算。旨在与在不同fov下移动鼠标准心移动距离相同，本网站在github上开源，欢迎反馈和贡献。</div>
			</aside>
		</div>

		<!-- 添加 GitHub 仓库地址 -->
		<footer style="margin-top:24px;text-align:center;color:var(--muted);font-size:14px;">
			<p>开源项目地址：<a href="https://github.com/Chaoji-Mouse/Sensitivity-Calculation-Tool" target="_blank" style="color:var(--accent);text-decoration:none;">GitHub 仓库</a></p>
		</footer>
	</div>

	<style>
		/* 修复网页背景断层问题 */
		html, body {
			background: linear-gradient(180deg, var(--bg), var(--bg)); /* 确保背景颜色一致 */
		}
	</style>

	<script>
		const btn = document.getElementById('calcBtn');
		const inputs = Array.from(document.querySelectorAll('.float-input'));
		const output = document.getElementById('output');
		const defaultOutputText = '目标cm/360°';

		function validateInputs(){
			for(const i of inputs){
				const v = i.value.trim();
				if(v === '') return { ok:false, msg:'请填写所有输入（不可为空）' };
				const n = parseFloat(v);
				if(!Number.isFinite(n) || n <= 0) return { ok:false, msg:'请输入大于 0 的正浮点数' };
			}
			return { ok:true };
		}

		function showMessage(msg, err=false){
			output.textContent = msg;
			output.style.color = err ? '#ffb3b3' : 'var(--muted)';
		}

		function updateButtonState(){
			const v = validateInputs();
			btn.disabled = !v.ok;
			// 不展示实时提示，始终显示默认输出文本
			output.textContent = defaultOutputText;
			output.style.color = 'var(--muted)';
		}

		// 绑定实时校验（仅用于锁定/解锁按钮）
		inputs.forEach(i=>{
			i.addEventListener('input', updateButtonState);
			i.addEventListener('change', updateButtonState);
		});

		// 初始状态（不显示提示）
		updateButtonState();

		btn.addEventListener('click', ()=>{
			const v = validateInputs();
			if(!v.ok){
				// 仅在用户点击计算并且输入不合规时显示错误提示
				showMessage(v.msg, true);
				return;
			}
			// 安全解析并计算
			const vals = inputs.map(i => parseFloat(i.value.trim()));
			const [vfov1, vfov2, cm360] = vals;
			const cm1_1 = cm360 / 360;
			const x1 = vfov1 * cm1_1;
			const cm1_2 = x1 / vfov2;
			const cm360_2 = cm1_2 * 360;
			const formatted = Number.isFinite(cm360_2) ? +cm360_2.toFixed(6) : '计算异常';
			showMessage('结果: ' + formatted + ' cm/360°');
		});

		// ====== 提示栏逻辑 ======
		// 示例提示，可替换为任意长文本
		const tips = [
			{ id:'t1', title:'这些参数是什么', content:'Fov:\nFOV 是 Field Of View 的缩写，中文译为 视场角 或 视野范围。\nHFOV 是 Horizontal Field Of View 的缩写，中文译为 水平视场角。它描述的是在 水平方向（从左到右） 上能看到的场景的角度范围。\nVFOV 是 Vertical Field Of View 的缩写，中文译为 垂直视场角。它描述的是在 垂直方向（从上到下） 上能看到的场景的角度范围。\n\ncm/360°:\ncm/360° 的全称是 Centimeters per 360 Degrees。它指的是你的 物理鼠标需要在鼠标垫上移动多少厘米的距离，才能使你在游戏中的视角（准星）完整地旋转一周（360度）。它是衡量 游戏鼠标灵敏度 的一个绝对物理标准。此参数会随着edpi变化而变化，值得注意的是此参数不代表游戏灵敏度参数，若要得知灵敏度参数需要使用下面的工具进行计算'},
            { id:'t2', title:'关于引用mouse-sensitivity', content:'注:本网页与mouse-sensitivity不存在任何关系\n引用mouse-sensitivity仅为方便用户'},
		];
		const tipSelect = document.getElementById('tipSelect');
		const tipContent = document.getElementById('tipContent');

		// 填充下拉
		tips.forEach(t=>{
			const opt = document.createElement('option');
			opt.value = t.id;
			opt.textContent = t.title;
			tipSelect.appendChild(opt);
		});

		// 选择变化时显示提示并滚动到顶部
		tipSelect.addEventListener('change', ()=>{
			const id = tipSelect.value;
			if(!id){
				tipContent.textContent = '本网站为一个用于计算不同视场下灵敏度的工具，支持不同游戏的计算。旨在计算不同fov下使移动鼠标准心移动距离相同的cm/360，本网站在github上开源，欢迎反馈和贡献。';
				return;
			}
			const sel = tips.find(x=>x.id === id);
			tipContent.textContent = sel ? sel.content : '未找到提示';
			tipContent.scrollTop = 0;
		});
		// 初始不选中（保持默认文本）
		tipContent.textContent = '本网站为一个用于计算不同视场下灵敏度的工具，支持不同游戏的计算。旨在计算不同fov下使移动鼠标准心移动距离相同的cm/360，本网站在github上开源，欢迎反馈和贡献。';
	</script>
</body>
</html>
